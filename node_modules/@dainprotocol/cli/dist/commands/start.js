"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = start;
var child_process_1 = require("child_process");
var utils_1 = require("../utils");
function start(options) {
    process.env.PORT = options.port;
    var command = "node ".concat((0, utils_1.getDainConfig)()['main-file']);
    var child = (0, child_process_1.spawn)('node', [(0, utils_1.getDainConfig)()['main-file']], {
        stdio: 'inherit' // This pipes stdout/stderr directly to parent process
    });
    child.on('error', function (error) {
        console.error("Error: ".concat(error.message));
        process.exit(1);
    });
    child.on('exit', function (code) {
        if (code !== 0) {
            console.error("Process exited with code ".concat(code));
            process.exit(code || 1);
        }
        process.exit(0);
    });
}

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.defineDAINService = defineDAINService;
const tslib_1 = require("tslib");
const service_1 = require("./service");
function defineDAINService(config) {
    const baseService = (0, service_1.createBaseDAINService)(config);
    const startDeno = async (options = {
        port: 8787,
    }) => {
        const service = baseService.startService();
        const { port } = options;
        //@ts-ignore Deno.listen is not yet typed if not in a Deno environment
        const server = Deno.listen({ port });
        console.log(`Server is listening on port ${port} -- Deno Environment`);
        console.log(`DAIN Service is running on version ${config.metadata.version}`);
        return {
            address: () => ({ port }),
            shutdown: async () => {
                console.log("Shutting down DAIN service...");
                server.close();
            },
        };
    };
    return {
        ...baseService,
        startDeno,
    };
}
tslib_1.__exportStar(require("./types"), exports);
//# sourceMappingURL=denoService.js.map